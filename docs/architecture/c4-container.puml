@startuml C4_Container
!include c4-plantuml/C4_Container.puml

title Container Diagram - Felix 低代码平台

Person(designer, "页面设计师", "使用平台创建和编辑页面")
Person(developer, "开发者", "导出代码并进行二次开发")

System_Boundary(lowcode_platform, "Felix 低代码平台") {
    Container(web_app, "Web 应用", "Next.js 15 + React 19", "提供可视化编辑界面，支持拖拽式组件编辑、实时预览等功能")
    Container(api_layer, "API 层", "Next.js API Routes", "提供 RESTful API，处理业务逻辑和数据操作")
    Container(websocket, "实时协作服务", "WebSocket/SSE", "处理多人实时编辑和操作同步")
    ContainerDb(database, "数据库", "PostgreSQL/MongoDB", "存储页面、组件、模板、用户等数据")
    ContainerDb(cache, "缓存", "Redis", "缓存热点数据和会话信息")
    ContainerDb(file_storage, "文件存储", "对象存储", "存储用户上传的文件和导出的代码")
}

System_Ext(cdn, "CDN 服务", "提供静态资源加速")
System_Ext(auth_service, "认证服务", "提供用户认证和授权")
System_Ext(code_repo, "代码托管", "Git 仓库")

Rel(designer, web_app, "使用", "HTTPS")
Rel(developer, web_app, "使用", "HTTPS")

Rel(web_app, api_layer, "调用", "HTTP")
Rel(web_app, websocket, "连接", "WebSocket")
Rel(web_app, cdn, "获取静态资源", "HTTPS")

Rel(api_layer, database, "读写", "SQL/NoSQL")
Rel(api_layer, cache, "读写", "Redis Protocol")
Rel(api_layer, file_storage, "读写", "HTTPS")
Rel(api_layer, auth_service, "验证", "HTTPS")

Rel(websocket, database, "读写", "SQL/NoSQL")
Rel(websocket, cache, "读写", "Redis Protocol")

Rel(api_layer, code_repo, "导出代码", "HTTPS/SSH")

SHOW_LEGEND()

@enduml


