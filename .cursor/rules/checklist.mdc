# Checklist 规则

## 核心原则

1. **完整性**：检查清单应覆盖所有关键步骤和验证点，确保不遗漏重要环节
2. **可追踪性**：每个检查项应清晰明确，便于追踪和验证完成状态
3. **可执行性**：检查项应具体可操作，避免模糊或抽象的描述
4. **分层验证**：根据架构层级和职责范围，在不同层次进行相应的检查
5. **持续改进**：定期审查和更新检查清单，反映项目演进和最佳实践

## 功能开发检查清单

### 需求分析
- [ ] 需求已明确，包含功能描述、验收标准
- [ ] 已识别相关依赖和影响范围
- [ ] 已评估技术可行性和复杂度
- [ ] 已考虑边界情况和异常场景

### 设计阶段
- [ ] 遵循整洁架构的依赖规则
- [ ] 定义了领域模型和接口
- [ ] 考虑了安全、性能和可访问性要求

### 开发阶段
- [ ] 代码遵循项目编码规范
- [ ] 实现了必要的错误处理
- [ ] 代码已通过静态检查（ESLint、TypeScript）

### 测试阶段
- [ ] 编写了单元测试（覆盖率 > 80%）
- [ ] 进行了手动测试验证
- [ ] 测试用例覆盖正常流程和异常场景

### 代码审查
- [ ] 代码已提交 PR 并请求审查
- [ ] 已解决审查反馈的问题

## 代码质量检查清单

- [ ] 遵循 TypeScript 类型规范
- [ ] 遵循 ESLint 规则
- [ ] 变量和函数命名清晰有意义
- [ ] Domain 层不依赖框架或 UI
- [ ] Application 层只依赖 Domain 层
- [ ] Infrastructure 层实现 Domain/Application 接口
- [ ] 所有异步操作都有错误处理
- [ ] 错误信息清晰且不泄露敏感信息

## 安全检查清单

- [ ] 所有需要认证的端点都进行了身份验证
- [ ] 所有操作都进行了权限检查
- [ ] 所有用户输入都进行了验证
- [ ] 对输出进行了适当的编码（防止 XSS）
- [ ] 所有网络通信使用 TLS 加密
- [ ] 敏感数据在数据库中加密存储

## 性能检查清单

- [ ] 频繁触发的事件使用防抖或节流
- [ ] API 响应使用缓存（设置合理 TTL）
- [ ] 长列表（>100 项）使用虚拟滚动
- [ ] 非首屏图片使用懒加载
- [ ] 路由组件使用代码分割

## UI/UX 检查清单

- [ ] 视觉层次清晰，重要信息突出
- [ ] 使用统一的设计令牌（颜色、字体、间距）
- [ ] 所有操作都有即时反馈
- [ ] 长时间操作显示加载状态
- [ ] 使用语义化 HTML
- [ ] 所有图片有有意义的 alt 文本
- [ ] 支持键盘导航
- [ ] 颜色对比度符合 WCAG 标准

## 测试检查清单

- [ ] 测试覆盖所有公共方法
- [ ] 测试覆盖正常流程和异常场景
- [ ] 测试使用描述性的命名（英文）
- [ ] 测试遵循 Given-When-Then 结构

## 部署检查清单

- [ ] 代码编译无错误
- [ ] 所有测试通过
- [ ] 静态检查通过（ESLint、TypeScript）
- [ ] 环境变量已正确配置
- [ ] 敏感信息不在代码中硬编码
- [ ] 版本号已更新
- [ ] 文档已更新

## 架构层级的检查清单应用

### Domain Layer（领域层）
- [ ] 实体和值对象定义清晰
- [ ] 仓储接口定义完整
- [ ] 不依赖框架或 UI
- [ ] 业务规则验证完整

### Application Layer（应用层）
- [ ] 用例逻辑清晰
- [ ] 输入验证完整
- [ ] 错误处理完善
- [ ] 只依赖 Domain 层

### Infrastructure Layer（基础设施层）
- [ ] 正确实现了 Domain/Application 接口
- [ ] 错误处理完善
- [ ] 日志记录适当
- [ ] 不包含业务逻辑

### Presentation Layer（展示层）
- [ ] 组件职责单一
- [ ] 使用设计系统组件
- [ ] 可访问性支持完整
- [ ] 性能优化到位

## PR 检查清单模板

```markdown
## PR 检查清单

### 代码质量
- [ ] 代码遵循项目规范
- [ ] 没有 ESLint/TypeScript 错误
- [ ] 代码已格式化

### 测试
- [ ] 添加了必要的测试
- [ ] 所有测试通过
- [ ] 测试覆盖率满足要求

### 功能
- [ ] 功能按需求实现
- [ ] 边界情况已处理
- [ ] 错误处理完善

### 安全
- [ ] 输入验证完整
- [ ] 敏感信息已保护
- [ ] 权限检查正确

### 性能
- [ ] 性能影响已评估
- [ ] 必要的优化已实施
```

## 实施流程

1. **选择检查清单**：根据任务类型选择合适的检查清单
2. **逐步完成**：在开发过程中逐步完成检查项
3. **验证完成**：提交前验证所有检查项已完成
4. **持续改进**：根据经验更新和完善检查清单
